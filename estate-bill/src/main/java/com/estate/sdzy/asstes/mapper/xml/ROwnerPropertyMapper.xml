<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.estate.sdzy.asstes.mapper.ROwnerPropertyMapper">
    <select id="ownerProByParkId" resultType="com.estate.sdzy.asstes.entity.ROwner">
        select aa.name,aa.owner_type,aa.owner_addr,aa.tel,aa.e_mail,aa.cert_type,aa.cert_number
        from r_owner aa,r_owner_property bb,r_parking_space cc
        where  aa.id = bb.owner_id and bb.property_id=cc.id
        and cc.id=#{id} and bb.property_type=#{type} and bb.is_delete=#{del} and cc.is_delete=#{del}

    </select>

    <select id="getOwnerProperty" parameterType="java.lang.Long" resultType="com.estate.sdzy.asstes.entity.ROwnerProperty">
        SELECT
            s_company.NAME AS comp_name,
            r_community.NAME AS comm_name,
            r_comm_area.NAME AS comm_area_name,
            r_building.NAME AS buildiing_name,
            r_owner_property.*
        FROM
            r_owner_property
            LEFT JOIN s_company ON r_owner_property.comp_id = s_company.id
            LEFT JOIN r_community ON r_owner_property.comm_id = r_community.id
            LEFT JOIN r_comm_area ON r_owner_property.comm_area_id = r_comm_area.id
            LEFT JOIN r_building ON r_owner_property.buildiing_id = r_building.id
        WHERE
            r_owner_property.is_delete = 0
            and r_owner_property.owner_id = #{ownerId}
    </select>
</mapper>
